<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation Entrepreneuriat - Fiches Compl√©mentaires</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="formation-layout">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">KJ</div>
                    <div class="user-details">
                        <h3 id="userName">Kevin JEAN</h3>
                        <p>√âtudiant</p>
                    </div>
                </div>
                <div class="progress-info">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>Progression</span>
                        <span id="progressPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <nav class="navigation" id="navigation">
                <!-- Navigation will be generated by JavaScript -->
            </nav>

            <div style="padding: 20px;">
                <button onclick="logout()" style="width: 100%; padding: 10px; background: #dc3545; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    D√©connexion
                </button>
            </div>
        </div>

        <!-- Contenu principal -->
        <div class="main-content">
            <div class="content-header">
                <h1 class="content-title" id="pageTitle">Fiches Compl√©mentaires</h1>
                <p class="content-subtitle" id="moduleTitle">Ressources t√©l√©chargeables</p>
            </div>

            <!-- Navigation de le√ßon -->
            <div class="lesson-nav">
                <button class="nav-button prev" id="prevButton" onclick="previousLesson()">
                    ‚Üê Pr√©c√©dent
                </button>
                
                <button class="complete-button" id="completeButton" onclick="markAsCompleted()">
                    Marquer comme termin√©
                </button>
                
                <button class="nav-button next" id="nextButton" onclick="nextLesson()">
                    Suivant ‚Üí
                </button>
            </div>

            <!-- Grille des PDF -->
            <div class="pdf-grid" id="pdfGrid">
                <div class="pdf-card">
                    <div class="pdf-preview">
                        üìÑ
                    </div>
                    <div class="pdf-info">
                        <h3 class="pdf-title">Fiche 1 - Plan d'Action Entrepreneurial</h3>
                        <p class="pdf-description">Guide pratique pour √©laborer votre plan d'action personnalis√©</p>
                        <button class="download-button" onclick="downloadPDF('fiche-1-plan-action.pdf')">
                            T√©l√©charger PDF
                        </button>
                    </div>
                </div>

                <div class="pdf-card">
                    <div class="pdf-preview">
                        üìä
                    </div>
                    <div class="pdf-info">
                        <h3 class="pdf-title">Fiche 2 - Template Business Model Canvas</h3>
                        <p class="pdf-description">Mod√®le vierge pour structurer votre projet d'entreprise</p>
                        <button class="download-button" onclick="downloadPDF('fiche-2-business-canvas.pdf')">
                            T√©l√©charger PDF
                        </button>
                    </div>
                </div>

                <div class="pdf-card">
                    <div class="pdf-preview">
                        üí∞
                    </div>
                    <div class="pdf-info">
                        <h3 class="pdf-title">Fiche 3 - Mod√®le Pr√©visionnel Financier</h3>
                        <p class="pdf-description">Template Excel pour vos pr√©visions financi√®res</p>
                        <button class="download-button" onclick="downloadPDF('fiche-3-previsionnel-financier.pdf')">
                            T√©l√©charger PDF
                        </button>
                    </div>
                </div>

                <div class="pdf-card">
                    <div class="pdf-preview">
                        ‚öñÔ∏è
                    </div>
                    <div class="pdf-info">
                        <h3 class="pdf-title">Fiche 4 - Comparatif Statuts Juridiques</h3>
                        <p class="pdf-description">Tableau comparatif des diff√©rentes formes juridiques</p>
                        <button class="download-button" onclick="downloadPDF('fiche-4-statuts-juridiques.pdf')">
                            T√©l√©charger PDF
                        </button>
                    </div>
                </div>

                <div class="pdf-card">
                    <div class="pdf-preview">
                        üéØ
                    </div>
                    <div class="pdf-info">
                        <h3 class="pdf-title">Fiche 5 - Analyse de March√©</h3>
                        <p class="pdf-description">Framework pour analyser votre march√© cible</p>
                        <button class="download-button" onclick="downloadPDF('fiche-5-analyse-marche.pdf')">
                            T√©l√©charger PDF
                        </button>
                    </div>
                </div>

                <div class="pdf-card">
                    <div class="pdf-preview">
                        üìã
                    </div>
                    <div class="pdf-info">
                        <h3 class="pdf-title">Fiche 6 - Checklist Cr√©ation d'Entreprise</h3>
                        <p class="pdf-description">Liste compl√®te des d√©marches √† effectuer</p>
                        <button class="download-button" onclick="downloadPDF('fiche-6-checklist-creation.pdf')">
                            T√©l√©charger PDF
                        </button>
                    </div>
                </div>
            </div>

            <div style="margin-top: 40px; padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #007bff;">
                <h3 style="color: #007bff; margin-bottom: 10px;">üí° Comment utiliser ces fiches</h3>
                <p>Ces fiches compl√©mentaires sont con√ßues pour vous accompagner dans la mise en pratique des concepts abord√©s dans cette formation. T√©l√©chargez-les et utilisez-les comme support de travail pour d√©velopper votre projet entrepreneurial.</p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // V√©rifier l'authentification
        checkAuth();
        
        // Variables globales
        let currentModule = parseInt(getUrlParameter('module')) || 1;
        let currentLesson = parseInt(getUrlParameter('lesson')) || 1;
        
        // Initialiser la page
        initializePage();
        
        function initializePage() {
            // Charger la navigation
            generateNavigation();
            
            // Mettre √† jour les titres selon le module
            updatePageTitle();
            
            // Mettre √† jour l'√©tat des boutons
            updateNavigationButtons();
            
            // Mettre √† jour la progression
            updateProgress();
            
            // Personnaliser les PDF selon le module
            customizePDFsForModule();
        }
        
        function updatePageTitle() {
            const moduleData = getModuleData(currentModule);
            if (moduleData) {
                document.getElementById('pageTitle').textContent = 'Fiches Compl√©mentaires';
                document.getElementById('moduleTitle').textContent = moduleData.title;
            }
        }
        
        function customizePDFsForModule() {
            // Vous pouvez personnaliser les PDF selon le module
            // Par exemple, afficher des PDF diff√©rents selon le module courant
        }
        
        function downloadPDF(filename) {
            // Cr√©er un lien de t√©l√©chargement
            const link = document.createElement('a');
            link.href = `assets/pdf/${filename}`;
            link.download = filename;
            link.target = '_blank';
            
            // D√©clencher le t√©l√©chargement
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Notification
            showNotification(`T√©l√©chargement de ${filename} en cours...`);
        }
        
        function markAsCompleted() {
            const lessonKey = `module_${currentModule}_lesson_${currentLesson}`;
            
            // Marquer comme termin√© dans le localStorage
            let progress = JSON.parse(localStorage.getItem('lessonProgress') || '{}');
            progress[lessonKey] = {
                completed: true,
                completedAt: new Date().toISOString()
            };
            localStorage.setItem('lessonProgress', JSON.stringify(progress));
            
            // Envoyer les donn√©es au serveur
            sendProgressToServer();
            
            // Mettre √† jour l'interface
            updateProgress();
            generateNavigation();
            
            // Changer le bouton
            const completeButton = document.getElementById('completeButton');
            completeButton.textContent = '‚úì Termin√©';
            completeButton.style.background = '#28a745';
            completeButton.disabled = true;
            
            // Notification
            showNotification('Section marqu√©e comme termin√©e !');
        }
        
        function previousLesson() {
            const prevLesson = getPreviousLesson(currentModule, currentLesson);
            if (prevLesson) {
                if (prevLesson.isPDF) {
                    window.location.href = `pdf-downloads.html?module=${prevLesson.module}&lesson=${prevLesson.lesson}`;
                } else {
                    window.location.href = `lesson.html?module=${prevLesson.module}&lesson=${prevLesson.lesson}`;
                }
            }
        }
        
        function nextLesson() {
            const nextLesson = getNextLesson(currentModule, currentLesson);
            if (nextLesson) {
                if (nextLesson.isPDF) {
                    window.location.href = `pdf-downloads.html?module=${nextLesson.module}&lesson=${nextLesson.lesson}`;
                } else {
                    window.location.href = `lesson.html?module=${nextLesson.module}&lesson=${nextLesson.lesson}`;
                }
            }
        }
        
        function updateNavigationButtons() {
            const prevButton = document.getElementById('prevButton');
            const nextButton = document.getElementById('nextButton');
            const completeButton = document.getElementById('completeButton');
            
            // V√©rifier si la section est d√©j√† termin√©e
            const lessonKey = `module_${currentModule}_lesson_${currentLesson}`;
            const progress = JSON.parse(localStorage.getItem('lessonProgress') || '{}');
            
            if (progress[lessonKey] && progress[lessonKey].completed) {
                completeButton.textContent = '‚úì Termin√©';
                completeButton.style.background = '#28a745';
                completeButton.disabled = true;
            }
            
            // Bouton pr√©c√©dent
            const prevLesson = getPreviousLesson(currentModule, currentLesson);
            if (prevLesson) {
                prevButton.disabled = false;
                prevButton.style.display = 'block';
            } else {
                prevButton.disabled = true;
                prevButton.style.display = 'none';
            }
            
            // Bouton suivant
            const nextLesson = getNextLesson(currentModule, currentLesson);
            if (nextLesson) {
                nextButton.disabled = false;
                nextButton.style.display = 'block';
            } else {
                nextButton.disabled = true;
                nextButton.style.display = 'none';
            }
        }
        
        function logout() {
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('username');
            localStorage.removeItem('loginTime');
            window.location.href = 'index.html';
        }
        
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }
        
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #007bff;
                color: white;
                padding: 15px 20px;
                border-radius: 6px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
    </script>
</body>
</html>